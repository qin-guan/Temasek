@page "/Duty/Hoto"
@using System.Security.Claims
@using SqlSugar
@using Temasek.Operatorr.Entities

@inject ISqlSugarClient SqlClient
@inject NavigationManager Navigation

<RadzenStack>
    <RadzenText TextStyle="TextStyle.Overline">Hand Over Take Over</RadzenText>
    <RadzenText TextStyle="TextStyle.DisplayH5">Who are you taking over?</RadzenText>
    <RadzenText TextStyle="TextStyle.Caption">Pick from the appropriate role below.</RadzenText>

    <RadzenRow class="rz-mt-6">
        <RadzenColumn Size="12" SizeMD="4">
            <RadzenCard Variant="Variant.Flat">
                <RadzenStack Gap="1rem">
                    <RadzenText TextStyle="TextStyle.H6">Duty Clerk</RadzenText>
                    <RadzenText>@Dc?.UserId</RadzenText>
                    <RadzenButton class="rz-w-100 rz-mt-2" Variant="Variant.Flat" Click="@(() => { Navigation.NavigateTo("/Hoto/Clerk"); })">Select DC</RadzenButton>
                </RadzenStack>
            </RadzenCard>
        </RadzenColumn>

        <RadzenColumn Size="12" SizeMD="4">
            <RadzenCard Variant="Variant.Flat">
                <RadzenStack Gap="1rem">
                    <RadzenText TextStyle="TextStyle.H6">CDOO</RadzenText>
                    <RadzenText>@Cdoo?.UserId</RadzenText>
                    <RadzenButton class="rz-w-100 rz-mt-2" Variant="Variant.Flat" Click="@(() => { Navigation.NavigateTo("/Hoto/Officer"); })">Select CDOO</RadzenButton>
                </RadzenStack>
            </RadzenCard>
        </RadzenColumn>

        <RadzenColumn Size="12" SizeMD="4">
            <RadzenCard Variant="Variant.Flat">
                <RadzenStack Gap="1rem">
                    <RadzenText TextStyle="TextStyle.H6">CDOS</RadzenText>
                    <RadzenText>@Cdos?.UserId</RadzenText>
                    <RadzenButton class="rz-w-100 rz-mt-2" Variant="Variant.Flat" Click="@(() => { Navigation.NavigateTo("/Hoto/Spec"); })">Select CDOS</RadzenButton>
                </RadzenStack>
            </RadzenCard>
        </RadzenColumn>
    </RadzenRow>
</RadzenStack>

@code {

    public ClerkShiftRecord? Dc { get; set; }
    public OfficerShiftRecord? Cdoo { get; set; }
    public SpecShiftRecord? Cdos { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Dc = await SqlClient.Queryable<ClerkShiftRecord>().OrderByDescending(c => c.Start).FirstAsync();
        Cdoo = await SqlClient.Queryable<OfficerShiftRecord>().OrderByDescending(c => c.Start).FirstAsync();
        Cdos = await SqlClient.Queryable<SpecShiftRecord>().OrderByDescending(c => c.Start).FirstAsync();
    }

}