@page "/"
@using SqlSugar
@using Temasek.Operatorr.Entities

@inject ISqlSugarClient SqlClient

<PageTitle>Dashboard</PageTitle>

<RadzenCardGroup Responsive="true">
    <RadzenCard>
        <RadzenStack Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Start" Gap="1rem">
            <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex">Duty Clerk</RadzenText>
            <RadzenText TextStyle="TextStyle.Body1"><b>@Dc?.UserId</b></RadzenText>
        </RadzenStack>
    </RadzenCard>
    <RadzenCard>
        <RadzenStack Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Start" Gap="1rem">
            <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex">CDOO</RadzenText>
            <RadzenText TextStyle="TextStyle.Body1"><b>@Cdoo?.UserId</b></RadzenText>
        </RadzenStack>
    </RadzenCard>
    <RadzenCard>
        <RadzenStack Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Start" Gap="1rem">
            <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex">CDOS</RadzenText>
            <RadzenText TextStyle="TextStyle.Body1"><b>@Cdos?.UserId</b></RadzenText>
        </RadzenStack>
    </RadzenCard>

</RadzenCardGroup>

@code {

    public ClerkShiftRecord? Dc { get; set; }
    public OfficerShiftRecord? Cdoo { get; set; }
    public SpecShiftRecord? Cdos { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Dc = await SqlClient.Queryable<ClerkShiftRecord>().OrderByDescending(c => c.Start).FirstAsync();
        Cdoo = await SqlClient.Queryable<OfficerShiftRecord>().OrderByDescending(c => c.Start).FirstAsync();
        Cdos = await SqlClient.Queryable<SpecShiftRecord>().OrderByDescending(c => c.Start).FirstAsync();
    }

}